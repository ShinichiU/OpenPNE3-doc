========================
プラグインリリース手順書
========================

はじめに
========

このドキュメントでは、プラグイン開発者が自分のプラグインを plugins.openpne.jp にてリリースするための手順について説明します。

アカウント登録
==============

プラグインをリリースするためには、プラグインチャンネルサーバへの登録が必要になります。

プラグインチャンネルサーバへのアカウント登録は、 `OpenPNE Issue Tracking System`_ にて所定の手続きをおこなうことで発行することができます。

.. _`OpenPNE Issue Tracking System`: http://redmine.openpne.jp/

OpenPNE Issue Tracking System にアカウントを登録する
----------------------------------------------------

まずは http://redmine.openpne.jp/account/register でアカウントの登録手続きをおこなってください。

プラグインチャンネルサーバとの連携設定をする
--------------------------------------------

http://redmine.openpne.jp/pear_user/account にアクセスすると、プラグインチャンネルサーバのアカウントとの連携設定をおこなうことができます。

既にプラグインチャンネルサーバにユーザが登録されている場合、プラグインチャンネルサーバで使用しているユーザ名とパスワードを入力してください。

まだプラグインチャンネルサーバのアカウントを持っていない場合は、希望するユーザ名とパスワードを入力してください。

入力が完了したら、「Apply」ボタンを押下して設定を反映させてください。

プラグインの登録
================

次に、リリースしたいプラグインの情報を登録します。

http://redmine.openpne.jp/pear_package/add?project_id=op3-plugins にアクセスすると、プラグインの情報の登録をおこなうためのページに遷移します。

プラグインチャンネルサーバにプラグインが登録されていて、あなたがそのプラグインの lead である場合は、プラグイン名を入力することで、連携設定をおこなうことができます。

これから新しくプラグインを登録する場合は、ページ内のフォームフィールドに、プラグインに関する情報をすべて入力してください。

プラグインの概要、プラグインの説明は、現時点 (2009/12/08) では、バックエンドに使用しているプログラムの制限により ASCII 以外の文字列は使用できません。

ライセンスは、 symfony のプラグインインストーラが "MIT", "BSD", "LGPL", "PHP", "Apache" (大文字小文字区別せず) のいずれかでない場合に警告を発することを留意して設定してください。

入力が完了したら、「Apply」ボタンを押下して設定を反映させてください。

正常に登録されると、 http://redmine.openpne.jp/projects/op3-plugins の Subprojects に、登録したプラグインのプロジェクトへのリンクが追加されます。このプロジェクトはご自由にお使いください。

プラグインのリリース
====================

プラグインのリリースは plugins.openpne.jp でおこなう必要があります（将来的に redmine.openpne.jp 上でおこなえるようにする予定です）。

リリース用パッケージの作成
--------------------------

まず、リリース対象となるプラグインがインストールされている OpenPNE3 のプロジェクトルートで以下のコマンドを実行してください::

  $ symfony opPlugin:release opSamplePlugin ~/

:第 1 引数: リリース対象のプラグイン名
:第 2 引数: リリース用アーカイブファイルの生成先ディレクトリパス

コマンドを実行すると、リリースにあたって必要な各種事項について質問されます。

:Type plugin version:
  リリース後のプラグインのバージョンを入力します。
:Choose stability (stable, alpha, beta or devel):
  ステービリティ（安定性）について質問されます。 stable, alpha, beta, devel の中から選択し、入力します。
:Type release note:
  リリースノートを記述します。このコマンドで記述することのできるリリースノートは 1 行のみです。
  複数行のリリースノートを記述する必要がある場合、このコマンドは使用せず、 opPlugin:define 実行後の定義ファイルを自分で編集するか、
  定義ファイルを独自に作成した上で opPlugin:archive コマンドの実行をおこなってください。

必要事項の入力が完了すると、 opPlugin:release コマンドは package.xml ファイルとアーカイブファイルを自動生成します。

パッケージをサーバにアップロードする
------------------------------------

1. `プラグイン管理ページ`_ にログインする（アカウントは「アカウント登録」の章の「プラグインチャンネルサーバとの連携設定をする」節で設定したものです）
2. メニューから「Upload a Release」を選択する
3. 「.tgz release」に、生成したアーカイブファイルのパスを指定する
4. 「Submit」ボタンを押下

.. _`プラグイン管理ページ`: http://plugins.openpne.jp/4CYoEjm1PXzaTv.php

以上でリリース作業は完了となります。
